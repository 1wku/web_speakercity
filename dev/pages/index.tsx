import Banner from "components/home/banner";
import Brands, { Brand } from "components/home/brands";

import client from "@client";
import groq from "groq";
import Head from "next/head";
import Introduction, {
  Intro,
} from "components/home/introduction";
import Prices, { Price } from "components/home/price";

function Home({
  brands,
  intros,
  prices,
}: {
  brands: Brand[];
  intros: Intro[];
  prices: Price[];
}) {
  return (
    <div>
      <Head>
        <title>Speakercity</title>
        <meta
          name="description"
          content="Generated by create next app"
        />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <Banner />
        <Brands brands={brands} />
        <Introduction intros={intros} />
        <Prices prices={prices.reverse()} />
      </main>
    </div>
  );
}

export default Home;

export async function getStaticProps() {
  const { brands, intros, prices } =
    await client.fetch(groq`
    	{
				"intros": *[_type == "introduce"] 
					{
						title,
						bio,
						link
					},
        "brands":	*[_type == "brand"] 
    			{
    				name,
    				slug,
    				mainImage
    			}, 
        "prices":	*[_type == "price"] 
    			{
    				name,
    				price,
						imageUrl
    			}, 
			}	
    `);

  return {
    props: {
      brands,
      intros,
      prices,
    },
  };
}
