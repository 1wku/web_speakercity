import styles from "@styles/home/brands.module.scss";
import { urlFor } from "@services";
import client from "@client";

import { useNextSanityImage } from "next-sanity-image";
import Image from "next/image";
import cls from "classnames";

export interface Brand {
  name: string;
  slug: { current: string };
  mainImage: string;
}

function Brands({ brands }: { brands: Brand[] }) {
  return (
    <div className={cls(styles.brands, "ctn")}>
      <div className={cls(styles.brands__topbar)}>
        <span className={cls(styles.brands__topbar_decor)}>
          <span></span>
          <span></span>
          <span></span>
        </span>
        <h2>Thông tin loa mới</h2>
        <div className={cls(styles.brands__topbar_control)}>
          <span></span>
          <span></span>
        </div>
      </div>
      <div className={cls(styles.brands__sliceWrpaper)}>
        <div className={cls(styles.brands__slice)}>
          {brands.map((brand: Brand) => {
            // eslint-disable-next-line react-hooks/rules-of-hooks
            const imageProps = useNextSanityImage(
              client,
              brand.mainImage,
            );
            return (
              <div
                className={cls(styles.brands__sliceItem)}
                key={brand.slug.current}
              >
                <div
                  className={cls(
                    styles.brands__sliceItem_name,
                    "label",
                  )}
                >
                  <p>{brand.name}</p>
                  <p>{"Xem thêm >"}</p>
                </div>
                <div
                  className={styles.brands__sliceItem_image}
                >
                  <Image
                    {...imageProps}
                    alt={brand.name}
                    layout="fill"
                  />
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
}

export default Brands;
